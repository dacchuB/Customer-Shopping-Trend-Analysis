<html>

<head>



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        body {
            background-color: #bbe5f385;
        }

        .btn-primary {
            background-color: #007bff;
            color: #fff;
            border: 1px solid #007bff;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #8ddfee;
        }
        .container{
            color: #000;
        }
        h1{
            color: rgb(13, 71, 244);
            
        }
    </style>

    <title>Customer Visitor Log</title>


</head>

<body>
    <div class="container">
        <br>
        
        <div class="row">
            <div class="col-3">

            </div>
            <div class="col-6">
                <h1>SHOPPING TREND ANALYSIS</h1>
                <!--<img src="shopping.jpeg"
                    alt="" style="width: 100%;margin-top:-20px;">-->
                <!--https://jagkansas.org/wp-content/uploads/2020/10/Walmart-Logo.png-->
            </div>
            <div class="col-3">

            </div>

        </div>

        <!-- For image\logo -->

        <!-- 2nd section  Image and aform start -->
        <div class="row">
            <div class="col-6">
                <br>
                <br>
                <br>

                <img src="https://img.freepik.com/free-vector/big-isolated-employee-working-office-workplace-flat-illustration_1150-41780.jpg?w=996&t=st=1679650467~exp=1679651067~hmac=25ef6a72c15def4a6517f223c0b5735e0f3255f468dc661952dadd810d2b0f0c"
                    style="width: 100%;">

            </div>

            <div class="col-6">
                
                <br>
<br>

                

                <p>
                    <label>Gender </label>
                    <select id="gender" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="1">Male</option>
                        <option value="2">
                            Female
                        </option>
                        <option value="3">Other</option>
                    </select>

                    <span id="errGenderMsg" style="color:red"> </span>
                </p>
                <br>


                <p>
                    <label>Age Group </label>
                    <select id="ageGroup" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="1">kids(1-12)</option>
                        <option value="2">Teenagers(13-19)</option>
                        <option value="3">Youngsters(20-29)</option>
                        <option value="4">Aults(30-59)</option>
                        <option value="5">Sennior citizens(Above 60)</option>
                    </select>
                    <span id="errAgeGroupMsg" style="color:red">

                    </span>
                </p>
                <br>


                <p>
                    <label>Item Purchased </label>
                    <select id="itemPurchased" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="1">Outerwear</option>
                        <option value="2">Footwear</option>
                        <option value="3">Accessories</option>
                        <option value="4">Clothing</option>

                    </select>
                    <span id="errItemPurchasedMsg" style="color:red">

                    </span>
                </p>
                <br>

                <p>
                    <label>Review Rating </label>
                    <select id="reviewRate" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="1">Poor</option>
                        <option value="2">below Average</option>
                        <option value="3">Average</option>
                        <option value="4">Good</option>
                        <option value="5">Excellent</option>

                    </select>
                    <span id="errReviewRateMsg" style="color:red">

                    </span>
                </p>
                <br>

                <p>
                    <label>Location</label>
                    <select id="location" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="Mangalore">Mangalore</option>
                        <option value="Udupi">Udupi</option>
                        <option value="Mysuru">Mysuru</option>
                        <option value="Hasana">Hasana</option>
                        <option value="Bangalore">Bangalore</option>
                    </select>

                    <span id="errLocationMsg" style="color:red">

                    </span>
                </p>
                <br>

                <p>
                    <label>Payment Method </label>
                    <select id="paymentMethod" class="form-control">
                        <option disabled selected value="">--Select--</option>
                        <option value="1">Credit Card</option>
                        <option value="2">Bank Transfer</option>
                        <option value="3">Cash</option>
                        <option value="4">PayPal</option>
                        <option value="5">Debit Card</option>

                    </select>
                    <span id="errPaymentMethodMsg" style="color:red">

                    </span>
                </p>
                <br>
                <button class="btn btn-primary" style="width: 25%;" onclick="validateForm()">Submit</button>
                <span id="successMsg" style="color: green;"></span>
                <button class="btn btn-primary" style="width: 25%;float: right" type="button"
                    onclick="redirectToDashboard()">View Dashboard</button>
            </div>
            <script>
                function redirectToDashboard() {
                    // Redirect to the "/dashboard" URL
                    window.location.href = '/dashboard';
                }
            </script>




        </div>

        <!-- 2nd section Image and form end-->


    </div>
    <script>
        function validateForm() {
            var gender = document.getElementById("gender").value;
            if (gender == "") {
                document.getElementById("errGenderMsg").innerHTML = "Please select the gender ";
                return false
            }
            else {
                document.getElementById("errGenderMsg").innnerHTML = "";
            }

            var ageGroup = document.getElementById("ageGroup").value;
            if (ageGroup == "") {
                document.getElementById("errAgeGroupMsg").innerHTML = "please select the age group";
                return false

            }
            else {
                document.getElementById("errAgeGroupMsg").innerHTML = "";
            }

            var itemPurchased = document.getElementById("itemPurchased").value;
            if (itemPurchased == "") {
                document.getElementById("errItemPurchasedMsg").innerHTML = "please select the item purchased";
                return false

            }
            else {
                document.getElementById("errItemPurchasedMsg").innerHTML = "";
            }

            var reviewRate = document.getElementById("reviewRate").value;
            if (reviewRate == "") {
                document.getElementById("errReviewRateMsg").innerHTML = "please select the review rating";
                return false

            }
            else {
                document.getElementById("errReviewRateMsg").innerHTML = "";
            }

            var Location = document.getElementById("location");
            var selectedLocation = Location.options[Location.selectedIndex].text;

            if (selectedLocation === "") {
                document.getElementById("errLocationMsg").innerHTML = "Please select the Location";
                return false;
            } else {
                document.getElementById("errLocationMsg").innerHTML = "";
            }
            console.log("Selected Location:", selectedLocation);

            var paymentMethod = document.getElementById("paymentMethod").value;
            if (reviewRate == "") {
                document.getElementById("errPaymentMethodMsg").innerHTML = "please select the payment method";
                return false

            }
            else {
                document.getElementById("errPaymentMethodMsg").innerHTML = "";
            }



            //AJAX for sending data to srver 
            var xhttpVisitors = new XMLHttpRequest();
            xhttpVisitors.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("successMsg").innerHTML = this.responseText

                }
            }

            xhttpVisitors.open("POST", "http://127.0.0.1:5000/log-visitors", true)
            xhttpVisitors.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xhttpVisitors.send('gender=' + gender + '&age_group=' + ageGroup + '&item_purchased=' + itemPurchased + '&review_rate=' + reviewRate + '&location=' + selectedLocation + '&payment_method=' + paymentMethod);

        }
    </script>

</body>

</html>